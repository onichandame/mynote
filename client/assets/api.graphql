query users {
  users {
    edges {
      node {
        ...UserCore
      }
    }
  }
}

mutation signup($name: String!, $password: String!, $email: String) {
  signup(input: { name: $name, password: $password, email: $email })
}

mutation login($identity: String!, $password: String!) {
  login(input: { identity: $identity, password: $password })
}

mutation renewSession {
  renewSession
}

mutation updateProfileName($name: String!) {
  updateProfileName: updateUsers(update: { name: $name })
}

mutation updateProfileAvatar($avatar: String!) {
  updateProfileAvatar: updateUsers(update: { avatar: $avatar })
}

mutation updateProfileEmail($email: String!) {
  updateProfileEmail: updateUsers(update: { email: $email })
}

query listNotes {
  listNotes: notes(sorting: [{ field: CREATED_AT, direction: DESC }]) {
    pageInfo {
      ...PageInfo
    }
    edges {
      cursor
      node {
        ...NoteCore
      }
    }
  }
}

query findNote($id: Int!) {
  findNote: notes(filter: { id: { eq: $id } }) {
    edges {
      node {
        ...NoteCore
      }
    }
  }
}

mutation createNote($title: String!, $content: String!) {
  createNote(input: { title: $title, content: $content }) {
    ...NoteCore
  }
}

fragment UserCore on User {
  id
  name
  email
  avatar
  createdAt
  updatedAt
}

fragment NoteCore on Note {
  id
  createdAt
  updatedAt
  authorId
  title
  content
}

fragment PageInfo on PageInfo {
  hasPreviousPage
  hasNextPage
  startCursor
  endCursor
}
